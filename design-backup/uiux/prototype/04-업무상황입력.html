<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì—…ë¬´ìƒí™© ì…ë ¥ - AI ë„êµ¬ ì°¾ê¸°</title>
    <link rel="stylesheet" href="common.css">
    <style>
        .situation-layout {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .situation-content {
            flex: 1;
            padding: var(--space-xl) 0;
        }
        
        .situation-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-xl);
            max-width: 1000px;
            margin: 0 auto;
        }
        
        .situation-form {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            box-shadow: var(--shadow-sm);
        }
        
        .form-header {
            text-align: center;
            margin-bottom: var(--space-xl);
        }
        
        .form-title {
            color: var(--color-gray-900);
            margin-bottom: var(--space-sm);
        }
        
        .form-subtitle {
            color: var(--color-gray-500);
            font-size: var(--font-size-body);
        }
        
        .progress-section {
            margin-bottom: var(--space-xl);
        }
        
        .progress-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-sm);
        }
        
        .progress-text {
            font-size: var(--font-size-caption);
            color: var(--color-gray-500);
        }
        
        .progress-percentage {
            font-weight: 600;
            color: var(--color-primary);
        }
        
        .input-section {
            margin-bottom: var(--space-xl);
            padding: var(--space-lg);
            border: 1px solid var(--color-gray-100);
            border-radius: var(--radius-lg);
            transition: all 0.2s ease;
        }
        
        .input-section.filled {
            border-color: var(--color-primary);
            background: var(--color-primary-light);
        }
        
        .section-title {
            display: flex;
            align-items: center;
            gap: var(--space-sm);
            font-size: var(--font-size-h4);
            font-weight: 600;
            color: var(--color-gray-900);
            margin-bottom: var(--space-md);
        }
        
        .required-mark {
            color: var(--color-error);
        }
        
        .section-description {
            color: var(--color-gray-500);
            font-size: var(--font-size-body);
            margin-bottom: var(--space-lg);
        }
        
        .tag-group {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-sm);
        }
        
        .tag-option {
            padding: var(--space-sm) var(--space-md);
            border: 1px solid var(--color-gray-300);
            border-radius: var(--radius-md);
            background: white;
            cursor: pointer;
            transition: all 0.2s ease;
            user-select: none;
        }
        
        .tag-option:hover {
            border-color: var(--color-primary);
            background: var(--color-primary-light);
        }
        
        .tag-option.selected {
            background: var(--color-primary);
            color: white;
            border-color: var(--color-primary);
        }
        
        .slider-container {
            margin: var(--space-lg) 0;
        }
        
        .slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: var(--color-gray-100);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: none;
        }
        
        .slider-labels {
            display: flex;
            justify-content: space-between;
            margin-top: var(--space-sm);
            font-size: var(--font-size-caption);
            color: var(--color-gray-500);
        }
        
        .slider-value {
            text-align: center;
            margin-top: var(--space-sm);
            font-weight: 600;
            color: var(--color-primary);
        }
        
        .radio-group {
            display: flex;
            gap: var(--space-md);
            flex-wrap: wrap;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: var(--space-xs);
            cursor: pointer;
        }
        
        .radio-option input[type="radio"] {
            margin: 0;
        }
        
        .sidebar {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-xl);
            box-shadow: var(--shadow-sm);
            height: fit-content;
            position: sticky;
            top: var(--space-xl);
        }
        
        .sidebar-title {
            font-size: var(--font-size-h4);
            font-weight: 600;
            color: var(--color-gray-900);
            margin-bottom: var(--space-lg);
        }
        
        .tip-item {
            margin-bottom: var(--space-lg);
        }
        
        .tip-title {
            font-weight: 500;
            color: var(--color-gray-900);
            margin-bottom: var(--space-xs);
        }
        
        .tip-content {
            font-size: var(--font-size-caption);
            color: var(--color-gray-500);
            line-height: 1.5;
        }
        
        .form-actions {
            display: flex;
            justify-content: center;
            margin-top: var(--space-xl);
            padding-top: var(--space-xl);
            border-top: 1px solid var(--color-gray-100);
        }
        
        @media (max-width: 1024px) {
            .situation-container {
                grid-template-columns: 1fr;
                gap: var(--space-lg);
            }
            
            .sidebar {
                position: static;
            }
        }
        
        @media (max-width: 768px) {
            .tag-group {
                justify-content: center;
            }
            
            .radio-group {
                flex-direction: column;
                gap: var(--space-sm);
            }
            
            .situation-container {
                padding: 0 var(--space-md);
            }
        }
    </style>
</head>
<body>
    <div class="situation-layout">
        <!-- í—¤ë” -->
        <header class="header">
            <div class="container">
                <div class="header__content">
                    <a href="03-ë©”ì¸ëŒ€ì‹œë³´ë“œ.html" class="header__logo">AI ë„êµ¬ ì°¾ê¸°</a>
                    <div class="header__nav">
                        <div class="header__user">
                            <div class="header__avatar" id="userAvatar">ê¹€</div>
                            <span id="userName">ê¹€ì² ìˆ˜</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>
        
        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main class="situation-content">
            <div class="container">
                <div class="situation-container">
                    <!-- ì…ë ¥ í¼ -->
                    <div class="situation-form fade-in">
                        <div class="form-header">
                            <h1 class="form-title">ì—…ë¬´ ìƒí™©ì„ ì•Œë ¤ì£¼ì„¸ìš”</h1>
                            <p class="form-subtitle">ì—¬ëŸ¬ë¶„ì˜ ìƒí™©ì— ë§ëŠ” ìµœì ì˜ AI ë„êµ¬ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤</p>
                        </div>
                        
                        <!-- ì§„í–‰ë¥  -->
                        <div class="progress-section">
                            <div class="progress-header">
                                <span class="progress-text">ì™„ì„±ë„</span>
                                <span class="progress-percentage" id="progressPercentage">0%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-bar__fill" id="progressFill" style="width: 0%;"></div>
                            </div>
                        </div>
                        
                        <form id="situationForm">
                            <!-- 1. ì—…ë¬´ìœ í˜• -->
                            <div class="input-section" id="workTypeSection">
                                <h3 class="section-title">
                                    <span>1.</span>
                                    <span>ì£¼ìš” ì—…ë¬´ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</span>
                                    <span class="required-mark">*</span>
                                </h3>
                                <p class="section-description">ì—¬ëŸ¬ ê°œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                                <div class="tag-group" id="workTypeTags">
                                    <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                                </div>
                            </div>
                            
                            <!-- 2. ì‚°ì—…ë¶„ì•¼ -->
                            <div class="input-section" id="industrySection">
                                <h3 class="section-title">
                                    <span>2.</span>
                                    <span>ì–´ë–¤ ë¶„ì•¼ì—ì„œ ì¼í•˜ì‹œë‚˜ìš”?</span>
                                </h3>
                                <p class="section-description">ê°€ì¥ ê°€ê¹Œìš´ ë¶„ì•¼ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</p>
                                <select class="form-select" id="industrySelect" name="industry">
                                    <option value="">ì‚°ì—… ë¶„ì•¼ ì„ íƒ</option>
                                    <!-- ë™ì ìœ¼ë¡œ ìƒì„± -->
                                </select>
                            </div>
                            
                            <!-- 3. íŒ€ê·œëª¨ -->
                            <div class="input-section" id="teamSizeSection">
                                <h3 class="section-title">
                                    <span>3.</span>
                                    <span>íŒ€ ê·œëª¨ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?</span>
                                </h3>
                                <p class="section-description">í•¨ê»˜ ì¼í•˜ëŠ” ì‚¬ëŒ ìˆ˜ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”</p>
                                <div class="slider-container">
                                    <input type="range" class="slider" id="teamSizeSlider" 
                                           min="1" max="100" value="5" name="teamSize">
                                    <div class="slider-labels">
                                        <span>1ëª…</span>
                                        <span>100ëª…+</span>
                                    </div>
                                    <div class="slider-value" id="teamSizeValue">5ëª…</div>
                                </div>
                            </div>
                            
                            <!-- 4. ì˜ˆì‚°ë²”ìœ„ -->
                            <div class="input-section" id="budgetSection">
                                <h3 class="section-title">
                                    <span>4.</span>
                                    <span>ì˜ˆì‚° ë²”ìœ„ëŠ” ì–´ë–»ê²Œ ë˜ë‚˜ìš”?</span>
                                </h3>
                                <p class="section-description">ì›” ê¸°ì¤€ìœ¼ë¡œ ìƒê°í•´ì£¼ì„¸ìš”</p>
                                <div class="tag-group">
                                    <div class="tag-option" data-value="free">ë¬´ë£Œë§Œ</div>
                                    <div class="tag-option" data-value="low">~10ë§Œì›</div>
                                    <div class="tag-option" data-value="medium">10~50ë§Œì›</div>
                                    <div class="tag-option" data-value="high">50ë§Œì› ì´ìƒ</div>
                                </div>
                                <input type="hidden" id="budgetValue" name="budget">
                            </div>
                            
                            <!-- 5. ê¸´ê¸‰ë„ -->
                            <div class="input-section" id="urgencySection">
                                <h3 class="section-title">
                                    <span>5.</span>
                                    <span>ì–¼ë§ˆë‚˜ ê¸‰í•˜ì‹ ê°€ìš”?</span>
                                </h3>
                                <p class="section-description">ë„êµ¬ë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ì‹œê¸‰ì„±ì„ ì•Œë ¤ì£¼ì„¸ìš”</p>
                                <div class="radio-group">
                                    <label class="radio-option">
                                        <input type="radio" name="urgency" value="1">
                                        <span>ë§¤ìš° ê¸‰í•¨</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="urgency" value="2">
                                        <span>ê¸‰í•¨</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="urgency" value="3">
                                        <span>ë³´í†µ</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="urgency" value="4">
                                        <span>ì—¬ìœ ìˆìŒ</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="urgency" value="5">
                                        <span>ë§¤ìš° ì—¬ìœ ìˆìŒ</span>
                                    </label>
                                </div>
                            </div>
                            
                            <!-- 6. ê¸°ìˆ ìˆ˜ì¤€ -->
                            <div class="input-section" id="techLevelSection">
                                <h3 class="section-title">
                                    <span>6.</span>
                                    <span>ê¸°ìˆ  í™œìš© ìˆ˜ì¤€ì€ ì–´ë– ì‹ ê°€ìš”?</span>
                                    <span class="required-mark">*</span>
                                </h3>
                                <p class="section-description">ìƒˆë¡œìš´ ë„êµ¬ í•™ìŠµì— ëŒ€í•œ ìì‹ ê°ì„ ì•Œë ¤ì£¼ì„¸ìš”</p>
                                <div class="tag-group">
                                    <div class="tag-option" data-value="1">ì´ˆê¸‰ (ê°„ë‹¨í•œ ë„êµ¬ë§Œ)</div>
                                    <div class="tag-option" data-value="2">ì¤‘ê¸‰ (ì–´ëŠì •ë„ ë³µì¡í•´ë„ OK)</div>
                                    <div class="tag-option" data-value="3">ê³ ê¸‰ (ë³µì¡í•œ ì„¤ì •ë„ ê°€ëŠ¥)</div>
                                </div>
                                <input type="hidden" id="techLevelValue" name="techLevel">
                            </div>
                            
                            <!-- ì œì¶œ ë²„íŠ¼ -->
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary btn-large" id="submitBtn" disabled>
                                    AI ë„êµ¬ ì¶”ì²œë°›ê¸° (ì™„ì„±ë„ 60% ì´ìƒ í•„ìš”)
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- ì‚¬ì´ë“œë°” -->
                    <div class="sidebar slide-up">
                        <h3 class="sidebar-title">ğŸ’¡ ì…ë ¥ ê°€ì´ë“œ</h3>
                        
                        <div class="tip-item">
                            <div class="tip-title">ì •í™•í•œ ì •ë³´ ì…ë ¥</div>
                            <div class="tip-content">
                                ì‹¤ì œ ì—…ë¬´ ìƒí™©ì„ ì†”ì§í•˜ê²Œ ì…ë ¥í• ìˆ˜ë¡ ë” ì •í™•í•œ ì¶”ì²œì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                            </div>
                        </div>
                        
                        <div class="tip-item">
                            <div class="tip-title">ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥</div>
                            <div class="tip-content">
                                ì—…ë¬´ìœ í˜•ì€ ì—¬ëŸ¬ ê°œë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ë¡œ í•˜ëŠ” ì¼ì„ ëª¨ë‘ ì„ íƒí•´ì£¼ì„¸ìš”.
                            </div>
                        </div>
                        
                        <div class="tip-item">
                            <div class="tip-title">ì˜ˆì‚° ê³ ë ¤ì‚¬í•­</div>
                            <div class="tip-content">
                                ê°œì¸ ì‚¬ìš©ê³¼ íŒ€ ì‚¬ìš©ì˜ ë¹„ìš©ì´ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ, ì‹¤ì œ ìƒí™©ì„ ê³ ë ¤í•´ì£¼ì„¸ìš”.
                            </div>
                        </div>
                        
                        <div class="tip-item">
                            <div class="tip-title">ê¸°ìˆ  ìˆ˜ì¤€</div>
                            <div class="tip-content">
                                ê³¼ë„í•˜ê²Œ ë³µì¡í•œ ë„êµ¬ë³´ë‹¤ëŠ” ì‹¤ì œ í™œìš© ê°€ëŠ¥í•œ ìˆ˜ì¤€ì˜ ë„êµ¬ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤.
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
    
    <script src="common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ë¡œê·¸ì¸ ì²´í¬
            if (!AppState.user) {
                Utils.navigateTo('01-ë¡œê·¸ì¸');
                return;
            }
            
            // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
            initializeUserInfo();
            
            // í¼ ì´ˆê¸°í™”
            initializeForm();
            
            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì„¤ì •
            setupEventListeners();
            
            function initializeUserInfo() {
                const userAvatar = Utils.$('#userAvatar');
                const userName = Utils.$('#userName');
                
                if (AppState.user) {
                    userAvatar.textContent = AppState.user.avatar || AppState.user.name.charAt(0);
                    userName.textContent = AppState.user.name;
                }
            }
            
            function initializeForm() {
                // ì—…ë¬´ìœ í˜• íƒœê·¸ ìƒì„±
                const workTypeTags = Utils.$('#workTypeTags');
                SampleData.workTypes.forEach(type => {
                    const tag = Utils.createElement('div', 'tag-option', type);
                    tag.dataset.value = type;
                    workTypeTags.appendChild(tag);
                });
                
                // ì‚°ì—…ë¶„ì•¼ ì˜µì…˜ ìƒì„±
                const industrySelect = Utils.$('#industrySelect');
                SampleData.industries.forEach(industry => {
                    const option = Utils.createElement('option', '', industry);
                    option.value = industry;
                    industrySelect.appendChild(option);
                });
                
                // ê¸°ì¡´ ë°ì´í„°ê°€ ìˆìœ¼ë©´ ë³µì›
                if (AppState.workSituation) {
                    restoreFormData();
                }
            }
            
            function setupEventListeners() {
                const form = Utils.$('#situationForm');
                
                // ì—…ë¬´ìœ í˜• íƒœê·¸ í´ë¦­
                Utils.on(Utils.$('#workTypeTags'), 'click', function(e) {
                    if (e.target.classList.contains('tag-option')) {
                        e.target.classList.toggle('selected');
                        updateProgress();
                    }
                });
                
                // ì˜ˆì‚°ë²”ìœ„ íƒœê·¸ í´ë¦­ (ë‹¨ì¼ ì„ íƒ)
                const budgetTags = Utils.$('#budgetSection .tag-group');
                Utils.on(budgetTags, 'click', function(e) {
                    if (e.target.classList.contains('tag-option')) {
                        // ëª¨ë“  íƒœê·¸ ë¹„í™œì„±í™”
                        budgetTags.querySelectorAll('.tag-option').forEach(tag => {
                            tag.classList.remove('selected');
                        });
                        // ì„ íƒëœ íƒœê·¸ í™œì„±í™”
                        e.target.classList.add('selected');
                        Utils.$('#budgetValue').value = e.target.dataset.value;
                        updateProgress();
                    }
                });
                
                // ê¸°ìˆ ìˆ˜ì¤€ íƒœê·¸ í´ë¦­ (ë‹¨ì¼ ì„ íƒ)
                const techLevelTags = Utils.$('#techLevelSection .tag-group');
                Utils.on(techLevelTags, 'click', function(e) {
                    if (e.target.classList.contains('tag-option')) {
                        // ëª¨ë“  íƒœê·¸ ë¹„í™œì„±í™”
                        techLevelTags.querySelectorAll('.tag-option').forEach(tag => {
                            tag.classList.remove('selected');
                        });
                        // ì„ íƒëœ íƒœê·¸ í™œì„±í™”
                        e.target.classList.add('selected');
                        Utils.$('#techLevelValue').value = e.target.dataset.value;
                        updateProgress();
                    }
                });
                
                // íŒ€ê·œëª¨ ìŠ¬ë¼ì´ë”
                const teamSizeSlider = Utils.$('#teamSizeSlider');
                const teamSizeValue = Utils.$('#teamSizeValue');
                Utils.on(teamSizeSlider, 'input', function() {
                    teamSizeValue.textContent = this.value + 'ëª…';
                    updateProgress();
                });
                
                // ì‚°ì—…ë¶„ì•¼ ì„ íƒ
                Utils.on(Utils.$('#industrySelect'), 'change', function() {
                    updateProgress();
                });
                
                // ê¸´ê¸‰ë„ ë¼ë””ì˜¤ ë²„íŠ¼
                const urgencyRadios = form.querySelectorAll('input[name="urgency"]');
                urgencyRadios.forEach(radio => {
                    Utils.on(radio, 'change', function() {
                        updateProgress();
                    });
                });
                
                // í¼ ì œì¶œ
                Utils.on(form, 'submit', async function(e) {
                    e.preventDefault();
                    
                    if (getCompletionPercentage() < 60) {
                        Utils.showToast('ì™„ì„±ë„ê°€ 60% ì´ìƒì´ì–´ì•¼ ì¶”ì²œì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.', 'warning');
                        return;
                    }
                    
                    const formData = collectFormData();
                    AppState.setWorkSituation(formData);
                    
                    const submitBtn = Utils.$('#submitBtn');
                    Utils.showLoading(submitBtn, 'ë¶„ì„ ì¤‘...');
                    
                    try {
                        const result = await MockAPI.getRecommendations(formData);
                        
                        if (result.success) {
                            AppState.setRecommendations(result.recommendations);
                            Utils.navigateTo('05-ì¶”ì²œê²°ê³¼');
                        } else {
                            Utils.showToast('ì¶”ì²œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                            submitBtn.innerHTML = 'AI ë„êµ¬ ì¶”ì²œë°›ê¸°';
                            submitBtn.disabled = false;
                        }
                        
                    } catch (error) {
                        console.error('Recommendation error:', error);
                        Utils.showToast('ì¶”ì²œ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
                        submitBtn.innerHTML = 'AI ë„êµ¬ ì¶”ì²œë°›ê¸°';
                        submitBtn.disabled = false;
                    }
                });
            }
            
            function updateProgress() {
                const percentage = getCompletionPercentage();
                const progressFill = Utils.$('#progressFill');
                const progressPercentage = Utils.$('#progressPercentage');
                const submitBtn = Utils.$('#submitBtn');
                
                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                progressFill.style.width = percentage + '%';
                progressPercentage.textContent = percentage + '%';
                
                // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
                if (percentage >= 60) {
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = 'AI ë„êµ¬ ì¶”ì²œë°›ê¸°';
                } else {
                    submitBtn.disabled = true;
                    submitBtn.innerHTML = `AI ë„êµ¬ ì¶”ì²œë°›ê¸° (ì™„ì„±ë„ ${percentage}%, 60% ì´ìƒ í•„ìš”)`;
                }
                
                // ì„¹ì…˜ ì™„ì„± ìƒíƒœ í‘œì‹œ
                updateSectionStates();
            }
            
            function getCompletionPercentage() {
                const weights = {
                    workType: 25,      // í•„ìˆ˜
                    industry: 15,
                    teamSize: 10,
                    budget: 15,
                    urgency: 10,
                    techLevel: 25      // í•„ìˆ˜
                };
                
                let score = 0;
                
                // ì—…ë¬´ìœ í˜• (í•„ìˆ˜)
                const selectedWorkTypes = Utils.$$('#workTypeTags .tag-option.selected');
                if (selectedWorkTypes.length > 0) {
                    score += weights.workType;
                }
                
                // ì‚°ì—…ë¶„ì•¼
                if (Utils.$('#industrySelect').value) {
                    score += weights.industry;
                }
                
                // íŒ€ê·œëª¨ (ê¸°ë³¸ê°’ì´ ìˆìœ¼ë¯€ë¡œ í•­ìƒ ì ìˆ˜)
                score += weights.teamSize;
                
                // ì˜ˆì‚°ë²”ìœ„
                if (Utils.$('#budgetValue').value) {
                    score += weights.budget;
                }
                
                // ê¸´ê¸‰ë„
                const urgencyChecked = Utils.$('input[name="urgency"]:checked');
                if (urgencyChecked) {
                    score += weights.urgency;
                }
                
                // ê¸°ìˆ ìˆ˜ì¤€ (í•„ìˆ˜)
                if (Utils.$('#techLevelValue').value) {
                    score += weights.techLevel;
                }
                
                return Math.round(score);
            }
            
            function updateSectionStates() {
                const sections = [
                    { id: 'workTypeSection', check: () => Utils.$$('#workTypeTags .tag-option.selected').length > 0 },
                    { id: 'industrySection', check: () => Utils.$('#industrySelect').value !== '' },
                    { id: 'teamSizeSection', check: () => true }, // ê¸°ë³¸ê°’ ì¡´ì¬
                    { id: 'budgetSection', check: () => Utils.$('#budgetValue').value !== '' },
                    { id: 'urgencySection', check: () => Utils.$('input[name="urgency"]:checked') !== null },
                    { id: 'techLevelSection', check: () => Utils.$('#techLevelValue').value !== '' }
                ];
                
                sections.forEach(section => {
                    const element = Utils.$('#' + section.id);
                    if (section.check()) {
                        element.classList.add('filled');
                    } else {
                        element.classList.remove('filled');
                    }
                });
            }
            
            function collectFormData() {
                // ì—…ë¬´ìœ í˜• ìˆ˜ì§‘
                const workTypes = Array.from(Utils.$$('#workTypeTags .tag-option.selected'))
                    .map(tag => tag.dataset.value);
                
                return {
                    workType: workTypes,
                    industry: Utils.$('#industrySelect').value,
                    teamSize: parseInt(Utils.$('#teamSizeSlider').value),
                    budget: Utils.$('#budgetValue').value,
                    urgency: Utils.$('input[name="urgency"]:checked')?.value || null,
                    techLevel: parseInt(Utils.$('#techLevelValue').value) || null
                };
            }
            
            function restoreFormData() {
                const data = AppState.workSituation;
                
                // ì—…ë¬´ìœ í˜• ë³µì›
                if (data.workType && data.workType.length > 0) {
                    data.workType.forEach(type => {
                        const tag = Utils.$(`#workTypeTags .tag-option[data-value="${type}"]`);
                        if (tag) tag.classList.add('selected');
                    });
                }
                
                // ì‚°ì—…ë¶„ì•¼ ë³µì›
                if (data.industry) {
                    Utils.$('#industrySelect').value = data.industry;
                }
                
                // íŒ€ê·œëª¨ ë³µì›
                if (data.teamSize) {
                    const slider = Utils.$('#teamSizeSlider');
                    slider.value = data.teamSize;
                    Utils.$('#teamSizeValue').textContent = data.teamSize + 'ëª…';
                }
                
                // ì˜ˆì‚° ë³µì›
                if (data.budget) {
                    const budgetTag = Utils.$(`#budgetSection .tag-option[data-value="${data.budget}"]`);
                    if (budgetTag) {
                        budgetTag.classList.add('selected');
                        Utils.$('#budgetValue').value = data.budget;
                    }
                }
                
                // ê¸´ê¸‰ë„ ë³µì›
                if (data.urgency) {
                    const urgencyRadio = Utils.$(`input[name="urgency"][value="${data.urgency}"]`);
                    if (urgencyRadio) urgencyRadio.checked = true;
                }
                
                // ê¸°ìˆ ìˆ˜ì¤€ ë³µì›
                if (data.techLevel) {
                    const techTag = Utils.$(`#techLevelSection .tag-option[data-value="${data.techLevel}"]`);
                    if (techTag) {
                        techTag.classList.add('selected');
                        Utils.$('#techLevelValue').value = data.techLevel;
                    }
                }
                
                // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
                updateProgress();
            }
            
            // ì´ˆê¸° ì§„í–‰ë¥  ê³„ì‚°
            updateProgress();
        });
    </script>
</body>
</html>

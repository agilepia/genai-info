@startuml
!theme mono

title 03. AI도구 비교평가 플로우

actor "직장인사용자" as User
participant "가이드북시스템" as System
participant "AI도구정보DB" as ToolDB
participant "비교분석엔진" as CompareEngine
participant "외부AI도구API" as ExternalAPI
participant "사용자행동로그시스템" as LogSystem

== 이벤트: 비교 대상 도구 선택 ==

User -> System: **커맨드: 비교도구선택**\n(도구ID목록, 비교항목: 가격/기능/사용성)

activate System
System -> ToolDB: **커맨드: 비교대상정보조회**\n(도구ID목록, 비교항목)
activate ToolDB

note right of System
  **정책/규칙:**
  - 최대 5개 도구까지 동시 비교 허용
  - 동일 카테고리 도구 우선 비교 권장
  - 가격/기능/사용성 점수 표준화 적용
  - 사용자 맞춤 가중치 반영
end note

ToolDB --> System: **이벤트: 비교대상도구정보조회됨**\n(도구목록, 기본정보, 카테고리)
deactivate ToolDB

System -> CompareEngine: **커맨드: 비교분석실행**\n(도구정보목록, 비교기준, 사용자프로필)
activate CompareEngine

CompareEngine -> ExternalAPI: **커맨드: 실시간비교데이터수집**\n(도구API목록)
activate ExternalAPI
ExternalAPI --> CompareEngine: **이벤트: 실시간데이터수집됨**\n(최신가격정보, 기능업데이트, 성능지표)
deactivate ExternalAPI

CompareEngine --> System: **이벤트: 비교분석완료됨**\n(비교결과매트릭스, 추천순위, 장단점분석)
deactivate CompareEngine

System --> User: **이벤트: AI도구비교결과표시됨**\n(비교표, 시각화차트, 추천이유)

== 이벤트: 상세 비교분석 ==

User -> System: **커맨드: 상세비교요청**\n(특정비교항목: 기능세부사항/가격정책/사용후기)
activate System

System -> ToolDB: **커맨드: 상세비교데이터조회**\n(도구ID목록, 상세비교항목)
activate ToolDB
ToolDB --> System: **이벤트: 상세비교데이터조회됨**\n(기능매트릭스, 가격정책상세, 사용자후기통계)
deactivate ToolDB

System -> CompareEngine: **커맨드: 심층비교분석**\n(상세데이터, 분석기준)
activate CompareEngine
CompareEngine --> System: **이벤트: 심층분석완료됨**\n(세부비교결과, 사용시나리오별추천)
deactivate CompareEngine

System --> User: **이벤트: 상세비교분석표시됨**\n(심층비교표, 시나리오별가이드)

== 이벤트: 비교결과 저장 및 공유 ==

User -> System: **커맨드: 비교결과저장**\n(비교세션ID, 저장명, 공유설정)
activate System

System -> ToolDB: **커맨드: 비교결과데이터저장**\n(사용자ID, 비교결과, 저장설정)
activate ToolDB
ToolDB --> System: **이벤트: 비교결과저장됨**\n(저장ID, 공유링크)
deactivate ToolDB

System -> LogSystem: **커맨드: 비교활동로깅**\n(사용자ID, 비교도구목록, 선택결과)
activate LogSystem
LogSystem --> System: **이벤트: 비교활동기록됨**\n(로그ID, 분석용메타데이터)
deactivate LogSystem

System --> User: **이벤트: 비교결과저장완료됨**\n(저장확인, 공유링크, 추후접근방법)

== 이벤트: 최종 도구 선택 ==

User -> System: **커맨드: 최종도구선택**\n(선택된도구ID, 선택이유)
activate System

System -> ToolDB: **커맨드: 선택결과기록**\n(사용자ID, 선택도구, 비교세션참조)
activate ToolDB
ToolDB --> System: **이벤트: 최종선택기록됨**\n(선택ID, 의사결정경로)
deactivate ToolDB

System -> LogSystem: **커맨드: 선택결과로깅**\n(의사결정데이터, 비교과정기록)
activate LogSystem
LogSystem --> System: **이벤트: 선택의사결정기록됨**\n(의사결정로그ID)
deactivate LogSystem

System --> User: **이벤트: 최종선택완료됨**\n(선택확인, 바로가기링크, 사용가이드링크)

deactivate System

note over User, LogSystem
  **필요한 데이터:**
  - 커맨드 데이터: 도구ID목록, 비교항목, 비교기준, 선택이유
  - 이벤트 데이터: 비교결과매트릭스, 분석데이터, 선택의사결정기록
  
  **External System:**
  - 비교분석엔진: 다차원 비교분석 알고리즘
  - 외부AI도구API: 실시간 도구 정보 수집
  - 사용자행동로그시스템: 의사결정 패턴 분석
end note

@enduml
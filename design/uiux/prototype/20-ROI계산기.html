<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ROI ê³„ì‚°ê¸° - AI Hub</title>
  <link rel="stylesheet" href="common.css">
  <style>
    body {
      background-color: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 16px;
    }
    
    .calculator-container {
      background-color: white;
      border-radius: 16px;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-xl);
      animation: modal-fade-in 0.3s ease-out;
    }
    
    @keyframes modal-fade-in {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .calculator-header {
      padding: 24px;
      border-bottom: 1px solid var(--neutral-300);
      position: sticky;
      top: 0;
      background-color: white;
      z-index: 10;
      border-radius: 16px 16px 0 0;
    }
    
    .close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background-color: var(--neutral-100);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: background-color var(--transition-fast);
    }
    
    .close-btn:hover {
      background-color: var(--neutral-300);
    }
    
    .calculator-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 8px;
    }
    
    .calculator-subtitle {
      font-size: 14px;
      color: var(--neutral-600);
    }
    
    .calculator-body {
      padding: 24px;
    }
    
    .input-group {
      margin-bottom: 24px;
    }
    
    .input-label {
      font-size: 14px;
      font-weight: 600;
      color: var(--neutral-900);
      margin-bottom: 8px;
      display: block;
    }
    
    .input-wrapper {
      position: relative;
      display: flex;
      align-items: center;
    }
    
    .input-field-roi {
      width: 100%;
      height: 48px;
      padding: 12px 60px 12px 16px;
      border: 2px solid var(--neutral-300);
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      color: var(--neutral-900);
      transition: all var(--transition-fast);
    }
    
    .input-field-roi:focus {
      outline: none;
      border-color: var(--primary-main);
      box-shadow: 0 0 0 3px rgba(79, 70, 229, 0.1);
    }
    
    .input-unit {
      position: absolute;
      right: 16px;
      font-size: 14px;
      color: var(--neutral-500);
      pointer-events: none;
    }
    
    .input-hint {
      font-size: 12px;
      color: var(--neutral-500);
      margin-top: 4px;
    }
    
    .case-info-box {
      background: linear-gradient(135deg, #EEF2FF 0%, #E0E7FF 100%);
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 24px;
      border-left: 4px solid var(--primary-main);
    }
    
    .case-info-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--primary-dark);
      margin-bottom: 4px;
    }
    
    .case-info-value {
      font-size: 24px;
      font-weight: 700;
      color: var(--primary-main);
    }
    
    .calculate-btn {
      width: 100%;
      height: 52px;
      background: linear-gradient(135deg, var(--primary-main) 0%, var(--primary-dark) 100%);
      color: white;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all var(--transition-fast);
      box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
    }
    
    .calculate-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 16px rgba(79, 70, 229, 0.4);
    }
    
    .calculate-btn:active {
      transform: translateY(0);
    }
    
    .results-section {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--neutral-300);
      display: none;
      animation: fade-in 0.5s ease-out;
    }
    
    @keyframes fade-in {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .results-section.show {
      display: block;
    }
    
    .result-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--neutral-900);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    
    .result-cards {
      display: grid;
      gap: 12px;
      margin-bottom: 24px;
    }
    
    .result-card {
      background-color: var(--neutral-50);
      padding: 20px;
      border-radius: 12px;
      border: 1px solid var(--neutral-300);
    }
    
    .result-card.highlight {
      background: linear-gradient(135deg, #D1FAE5 0%, #A7F3D0 100%);
      border-color: var(--success);
    }
    
    .result-card-label {
      font-size: 13px;
      color: var(--neutral-600);
      margin-bottom: 8px;
    }
    
    .result-card-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--neutral-900);
      line-height: 1;
      margin-bottom: 4px;
    }
    
    .result-card.highlight .result-card-value {
      color: var(--success);
    }
    
    .result-card-detail {
      font-size: 13px;
      color: var(--neutral-600);
    }
    
    .chart-container {
      background-color: var(--neutral-50);
      padding: 20px;
      border-radius: 12px;
      margin-bottom: 16px;
    }
    
    .chart-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--neutral-900);
      margin-bottom: 16px;
    }
    
    .bar-chart {
      display: flex;
      align-items: flex-end;
      height: 180px;
      gap: 32px;
      margin-bottom: 12px;
    }
    
    .bar-item {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 8px;
    }
    
    .bar {
      width: 100%;
      background: linear-gradient(to top, var(--error) 0%, #FCA5A5 100%);
      border-radius: 8px 8px 0 0;
      position: relative;
      transition: all 0.5s ease-out;
    }
    
    .bar.after {
      background: linear-gradient(to top, var(--success) 0%, #6EE7B7 100%);
    }
    
    .bar-value {
      position: absolute;
      top: -24px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 14px;
      font-weight: 700;
      color: var(--neutral-900);
      white-space: nowrap;
    }
    
    .bar-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--neutral-700);
      text-align: center;
    }
    
    .roi-summary {
      background: linear-gradient(135deg, #DBEAFE 0%, #BFDBFE 100%);
      padding: 16px;
      border-radius: 8px;
      text-align: center;
    }
    
    .roi-summary-label {
      font-size: 13px;
      color: var(--neutral-700);
      margin-bottom: 4px;
    }
    
    .roi-summary-value {
      font-size: 20px;
      font-weight: 700;
      color: #2563EB;
    }
    
    .action-buttons {
      display: flex;
      gap: 8px;
      margin-top: 24px;
    }
    
    @media (max-width: 767px) {
      body {
        padding: 0;
        background-color: white;
      }
      
      .calculator-container {
        max-height: 100vh;
        border-radius: 0;
      }
      
      .calculator-header {
        border-radius: 0;
      }
    }
  </style>
</head>
<body>
  <div class="calculator-container">
    <!-- í—¤ë” -->
    <div class="calculator-header">
      <button class="close-btn" onclick="closeCalculator()">Ã—</button>
      <h1 class="calculator-title">ROI ê³„ì‚°ê¸°</h1>
      <p class="calculator-subtitle">ìš°ë¦¬ ì¡°ì§ì— ì ìš©í•˜ë©´ ì–¼ë§ˆë‚˜ ì ˆê°ë ê¹Œìš”?</p>
    </div>
    
    <!-- ë³¸ë¬¸ -->
    <div class="calculator-body">
      <!-- ì‚¬ë¡€ ì •ë³´ -->
      <div class="case-info-box">
        <div class="case-info-title">ì´ ì‚¬ë¡€ì˜ íš¨ìœ¨ ê°œì„ ìœ¨</div>
        <div class="case-info-value">70% ì‹œê°„ ë‹¨ì¶•</div>
      </div>
      
      <!-- ì…ë ¥ í¼ -->
      <form id="roiForm" onsubmit="calculateROI(event)">
        <div class="input-group">
          <label class="input-label" for="currentTime">
            í˜„ì¬ ì†Œìš” ì‹œê°„ <span style="color: var(--error);">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              type="number" 
              id="currentTime" 
              class="input-field-roi" 
              placeholder="ì˜ˆ: 4"
              min="0.1"
              step="0.1"
              required
            >
            <span class="input-unit">ì‹œê°„/ì£¼</span>
          </div>
          <div class="input-hint">í•´ë‹¹ ì—…ë¬´ì— ì£¼ë‹¹ ëª‡ ì‹œê°„ì„ ì‚¬ìš©í•˜ì‹œë‚˜ìš”?</div>
        </div>
        
        <div class="input-group">
          <label class="input-label" for="hourlyCost">
            ì‹œê°„ë‹¹ ë¹„ìš© <span style="color: var(--error);">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              type="number" 
              id="hourlyCost" 
              class="input-field-roi" 
              placeholder="ì˜ˆ: 50000"
              min="1000"
              step="1000"
              required
            >
            <span class="input-unit">ì›</span>
          </div>
          <div class="input-hint">ë‹´ë‹¹ìì˜ ì‹œê°„ë‹¹ ì¸ê±´ë¹„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
        </div>
        
        <div class="input-group">
          <label class="input-label" for="period">
            ì˜ˆìƒ ì ìš© ê¸°ê°„ <span style="color: var(--error);">*</span>
          </label>
          <div class="input-wrapper">
            <input 
              type="number" 
              id="period" 
              class="input-field-roi" 
              placeholder="ì˜ˆ: 12"
              min="1"
              step="1"
              required
            >
            <span class="input-unit">ê°œì›”</span>
          </div>
          <div class="input-hint">ëª‡ ê°œì›”ê°„ ì‚¬ìš©ì„ ì˜ˆìƒí•˜ì‹œë‚˜ìš”?</div>
        </div>
        
        <button type="submit" class="calculate-btn">
          ğŸ’° ROI ê³„ì‚°í•˜ê¸°
        </button>
      </form>
      
      <!-- ê²°ê³¼ ì„¹ì…˜ -->
      <div id="resultsSection" class="results-section">
        <h2 class="result-title">
          <span>ğŸ“Š</span>
          <span>ì˜ˆìƒ ì ˆê° íš¨ê³¼</span>
        </h2>
        
        <div class="result-cards">
          <div class="result-card highlight">
            <div class="result-card-label">ì´ ì ˆê° íš¨ê³¼</div>
            <div class="result-card-value" id="totalSavings">-</div>
            <div class="result-card-detail" id="totalSavingsDetail">-</div>
          </div>
          
          <div class="result-card">
            <div class="result-card-label">ì›” ì‹œê°„ ì ˆê°</div>
            <div class="result-card-value" id="timeSavings">-</div>
            <div class="result-card-detail" id="timeSavingsDetail">-</div>
          </div>
          
          <div class="result-card">
            <div class="result-card-label">ì›” ë¹„ìš© ì ˆê°</div>
            <div class="result-card-value" id="monthlySavings">-</div>
            <div class="result-card-detail" id="monthlySavingsDetail">-</div>
          </div>
        </div>
        
        <!-- ì‹œê°í™” ì°¨íŠ¸ -->
        <div class="chart-container">
          <div class="chart-title">Before â†’ After ë¹„êµ</div>
          <div class="bar-chart">
            <div class="bar-item">
              <div class="bar" id="beforeBar" style="height: 0%;">
                <span class="bar-value" id="beforeValue">-</span>
              </div>
              <div class="bar-label">ì ìš© ì „<br>ì†Œìš” ì‹œê°„</div>
            </div>
            <div class="bar-item">
              <div class="bar after" id="afterBar" style="height: 0%;">
                <span class="bar-value" id="afterValue">-</span>
              </div>
              <div class="bar-label">ì ìš© í›„<br>ì†Œìš” ì‹œê°„</div>
            </div>
          </div>
        </div>
        
        <!-- íˆ¬ì íšŒìˆ˜ ê¸°ê°„ -->
        <div class="roi-summary">
          <div class="roi-summary-label">ì˜ˆìƒ íˆ¬ì íšŒìˆ˜ ê¸°ê°„</div>
          <div class="roi-summary-value" id="paybackPeriod">-</div>
        </div>
        
        <!-- ì•¡ì…˜ ë²„íŠ¼ -->
        <div class="action-buttons">
          <button class="btn btn-secondary" onclick="resetCalculator()" style="flex: 1;">
            ğŸ”„ ë‹¤ì‹œ ê³„ì‚°
          </button>
          <button class="btn btn-primary" onclick="saveResults()" style="flex: 1;">
            ğŸ’¾ ê²°ê³¼ ì €ì¥
          </button>
        </div>
      </div>
    </div>
  </div>
  
  <script src="common.js"></script>
  <script>
    // ì‚¬ë¡€ ë°ì´í„° (ì‹¤ë¬´ì‚¬ë¡€ ìƒì„¸ì—ì„œ ì „ë‹¬ë°›ì„ ìˆ˜ ìˆìŒ)
    const CASE_DATA = {
      improvementRate: 0.70, // 70% ì‹œê°„ ë‹¨ì¶•
      toolCost: 9900 // ChatGPT Plus ì›” êµ¬ë…ë£Œ
    };
    
    function calculateROI(event) {
      event.preventDefault();
      
      // ì…ë ¥ê°’ ê°€ì ¸ì˜¤ê¸°
      const currentTime = parseFloat(document.getElementById('currentTime').value);
      const hourlyCost = parseFloat(document.getElementById('hourlyCost').value);
      const period = parseInt(document.getElementById('period').value);
      
      // ìœ íš¨ì„± ê²€ì‚¬
      if (!currentTime || !hourlyCost || !period) {
        AppUtils.showToast('ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”');
        return;
      }
      
      // ê³„ì‚°
      const improvementRate = CASE_DATA.improvementRate;
      const toolCost = CASE_DATA.toolCost;
      const workDaysPerWeek = 5;
      const weeksPerMonth = 4.3;
      
      // ì›”ê°„ ì‹œê°„ ì ˆê° (ì‹œê°„)
      const monthlyTimeSavings = currentTime * improvementRate * weeksPerMonth;
      
      // ì›”ê°„ ë¹„ìš© ì ˆê° (ì›)
      const monthlyCostSavings = monthlyTimeSavings * hourlyCost;
      
      // ë„êµ¬ ë¹„ìš© ì°¨ê° í›„ ìˆœ ì ˆê°ì•¡
      const netMonthlySavings = monthlyCostSavings - toolCost;
      
      // ì´ ì ˆê° íš¨ê³¼ (ê¸°ê°„ ë™ì•ˆ)
      const totalSavings = netMonthlySavings * period;
      
      // íˆ¬ì íšŒìˆ˜ ê¸°ê°„ (ê°œì›”)
      const initialInvestment = toolCost; // ì²« ë‹¬ êµ¬ë…ë£Œ
      const paybackMonths = initialInvestment / netMonthlySavings;
      
      // ì ìš© í›„ ì‹œê°„
      const afterTime = currentTime * (1 - improvementRate);
      
      // ê²°ê³¼ í‘œì‹œ
      displayResults({
        currentTime,
        afterTime,
        monthlyTimeSavings,
        monthlyCostSavings,
        netMonthlySavings,
        totalSavings,
        paybackMonths,
        period
      });
      
      // ê²°ê³¼ ì„¹ì…˜ í‘œì‹œ
      document.getElementById('resultsSection').classList.add('show');
      
      // ê²°ê³¼ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
      setTimeout(() => {
        document.getElementById('resultsSection').scrollIntoView({ 
          behavior: 'smooth',
          block: 'nearest'
        });
      }, 100);
    }
    
    function displayResults(data) {
      // ì´ ì ˆê° íš¨ê³¼
      document.getElementById('totalSavings').textContent = 
        formatCurrency(data.totalSavings);
      document.getElementById('totalSavingsDetail').textContent = 
        `${data.period}ê°œì›”ê°„ ìˆœ ì ˆê°ì•¡`;
      
      // ì›” ì‹œê°„ ì ˆê°
      document.getElementById('timeSavings').textContent = 
        `${data.monthlyTimeSavings.toFixed(1)}h`;
      document.getElementById('timeSavingsDetail').textContent = 
        `ì£¼ë‹¹ ${(data.monthlyTimeSavings / 4.3).toFixed(1)}ì‹œê°„ ì ˆê°`;
      
      // ì›” ë¹„ìš© ì ˆê°
      document.getElementById('monthlySavings').textContent = 
        formatCurrency(data.netMonthlySavings);
      document.getElementById('monthlySavingsDetail').textContent = 
        `ë„êµ¬ ë¹„ìš© ${formatCurrency(CASE_DATA.toolCost)} ì°¨ê° í›„`;
      
      // íˆ¬ì íšŒìˆ˜ ê¸°ê°„
      if (data.paybackMonths < 1) {
        document.getElementById('paybackPeriod').textContent = 'ì¦‰ì‹œ íšŒìˆ˜';
      } else if (data.paybackMonths < 2) {
        document.getElementById('paybackPeriod').textContent = 'ì•½ 1ê°œì›”';
      } else {
        document.getElementById('paybackPeriod').textContent = 
          `ì•½ ${Math.ceil(data.paybackMonths)}ê°œì›”`;
      }
      
      // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
      updateChart(data.currentTime, data.afterTime);
    }
    
    function updateChart(beforeTime, afterTime) {
      const maxTime = beforeTime;
      const beforeHeight = 100;
      const afterHeight = (afterTime / maxTime) * 100;
      
      // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
      setTimeout(() => {
        document.getElementById('beforeBar').style.height = `${beforeHeight}%`;
        document.getElementById('beforeValue').textContent = `${beforeTime.toFixed(1)}h`;
        
        document.getElementById('afterBar').style.height = `${afterHeight}%`;
        document.getElementById('afterValue').textContent = `${afterTime.toFixed(1)}h`;
      }, 100);
    }
    
    function formatCurrency(amount) {
      if (amount >= 1000000) {
        return `${(amount / 1000000).toFixed(1)}ë°±ë§Œì›`;
      } else if (amount >= 10000) {
        return `${(amount / 10000).toFixed(0)}ë§Œì›`;
      } else {
        return `${amount.toLocaleString()}ì›`;
      }
    }
    
    function resetCalculator() {
      document.getElementById('roiForm').reset();
      document.getElementById('resultsSection').classList.remove('show');
      
      // í¼ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
      document.querySelector('.calculator-body').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }
    
    function saveResults() {
      // ì‹¤ì œ êµ¬í˜„ ì‹œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë‚˜ ë°±ì—”ë“œì— ì €ì¥
      AppUtils.showToast('ê³„ì‚° ê²°ê³¼ê°€ ì €ì¥ë˜ì—ˆì–´ìš”');
      
      // ê²°ê³¼ ë°ì´í„° êµ¬ì„±
      const results = {
        currentTime: document.getElementById('currentTime').value,
        hourlyCost: document.getElementById('hourlyCost').value,
        period: document.getElementById('period').value,
        totalSavings: document.getElementById('totalSavings').textContent,
        savedAt: new Date().toISOString()
      };
      
      // ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ (ì˜ˆì‹œ)
      const savedResults = AppUtils.Storage.get('roiResults') || [];
      savedResults.push(results);
      AppUtils.Storage.set('roiResults', savedResults);
    }
    
    function closeCalculator() {
      // ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ê¸°
      AppUtils.goBack();
    }
    
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì˜ˆì œ ë°ì´í„° ìë™ ì…ë ¥ (ê°œë°œìš©)
    window.addEventListener('DOMContentLoaded', () => {
      // URL íŒŒë¼ë¯¸í„°ë¡œ ë°ì´í„° ë°›ê¸° (ì„ íƒì‚¬í•­)
      const urlParams = new URLSearchParams(window.location.search);
      const autoFill = urlParams.get('demo');
      
      if (autoFill === 'true') {
        document.getElementById('currentTime').value = '4';
        document.getElementById('hourlyCost').value = '50000';
        document.getElementById('period').value = '12';
      }
    });
  </script>

  <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ -->
  <div class="nav-bar">
    <a href="#" class="nav-item" onclick="event.preventDefault(); AppUtils.navigateTo('05-í™ˆ.html');">
      <div class="nav-item-icon">ğŸ </div>
      <div class="nav-item-label">í™ˆ</div>
    </a>
    <a href="#" class="nav-item" onclick="event.preventDefault(); AppUtils.navigateTo('06-í†µí•©ê²€ìƒ‰.html');">
      <div class="nav-item-icon">ğŸ”</div>
      <div class="nav-item-label">ê²€ìƒ‰</div>
    </a>
    <a href="#" class="nav-item" onclick="event.preventDefault(); AppUtils.navigateTo('27-ê¸°ì—¬-ë©”ì¸.html');">
      <div class="nav-item-icon">âœï¸</div>
      <div class="nav-item-label">ê¸°ì—¬</div>
    </a>
    <a href="#" class="nav-item" onclick="event.preventDefault(); AppUtils.navigateTo('28-MY.html');">
      <div class="nav-item-icon">ğŸ‘¤</div>
      <div class="nav-item-label">MY</div>
    </a>
  </div>
</body>
</html>